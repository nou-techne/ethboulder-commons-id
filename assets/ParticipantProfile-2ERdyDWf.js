import{c as E,e as M,r as i,s as d,j as e,L as f,A as T,R as k,a as b,S as P}from"./index-HXAgaps0.js";import{C as j}from"./chevron-right-DV8Uxe7K.js";import{U as R}from"./user-ItwBV4sw.js";import{T as $}from"./tag-CGjhVOtl.js";import{C as D}from"./calendar-D4cENPbn.js";import{B as O}from"./book-open-ItFxPMHt.js";const q=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],y=E("layers",q),B={"hlamt:E":{letter:"e/",name:"Ecology",color:"#4a8c6f"},"hlamt:H":{letter:"H/",name:"Human",color:"#c4956a"},"hlamt:L":{letter:"L/",name:"Language",color:"#a6ed2a"},"hlamt:A":{letter:"A/",name:"Artifacts",color:"#8bbfff"},"hlamt:M":{letter:"M/",name:"Methodology",color:"#7ccfb8"},"hlamt:T":{letter:"T/",name:"Training",color:"#e8927c"},"hlamt:S":{letter:"S/",name:"Sessions",color:"#c084fc"}};function p(r){const s=Math.floor((Date.now()-new Date(r).getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function W(){const{id:r}=M(),[s,N]=i.useState(null),[n,v]=i.useState([]),[o,w]=i.useState([]),[_,A]=i.useState({}),[L,m]=i.useState(!0);i.useEffect(()=>{r&&S()},[r]);async function S(){m(!0);const{data:t}=await d.from("public_participants").select("id, name, affiliation, bio, interests, created_at").eq("id",r).single();if(!t){m(!1);return}N(t);const[{data:l},{data:a}]=await Promise.all([d.from("contributions").select("id, content, status, created_at").eq("participant_id",r).order("created_at",{ascending:!1}).limit(50),d.from("artifacts").select("*").eq("created_by",r).order("created_at",{ascending:!1}).limit(50)]);if(v(l||[]),w(a||[]),a&&a.length>0){const C=a.map(h=>h.id),{data:u}=await d.from("artifact_tags").select("tags(name)").in("artifact_id",C),x={};if(u)for(const h of u){const c=h.tags?.name;c&&c.startsWith("hlamt:")&&(x[c]=(x[c]||0)+1)}A(x)}m(!1)}if(L)return e.jsx("div",{className:"text-center text-gray-500 py-12",children:"Loading..."});if(!s)return e.jsx("div",{className:"text-center text-gray-500 py-12",children:"Participant not found"});const g=Object.entries(_).sort((t,l)=>l[1]-t[1]);return e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("nav",{className:"flex items-center gap-1.5 text-sm mb-4",children:[e.jsx(f,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Explore"}),e.jsx(j,{className:"w-3.5 h-3.5 text-gray-600"}),e.jsx("span",{className:"text-gray-400",children:"Participants"}),e.jsx(j,{className:"w-3.5 h-3.5 text-gray-600"}),e.jsx("span",{className:"text-white",children:s.name})]}),e.jsx("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-[#1d2839] flex items-center justify-center flex-shrink-0",children:e.jsx(R,{className:"w-7 h-7 text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:s.name}),s.affiliation&&e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:s.affiliation}),s.bio&&e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-3",children:s.bio}),s.interests&&s.interests.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.interests.map(t=>e.jsxs("span",{className:"bg-[#1d2839] text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),t]},t))}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[e.jsx(D,{className:"w-3 h-3"}),"Joined ",p(s.created_at)]})]})]})}),g.length>0&&e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-xl p-6 mb-6",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Dimension Activity"]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:g.map(([t,l])=>{const a=B[t];return a?e.jsxs("div",{className:"px-3 py-2 rounded-lg border flex items-center gap-2",style:{borderColor:a.color+"40"},children:[e.jsx("span",{className:"font-mono font-bold text-lg",style:{color:a.color},children:a.letter}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",style:{color:a.color},children:a.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l," artifact",l!==1?"s":""]})]})]},t):null})})]}),o.length>0&&e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-xl p-6 mb-6",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Artifacts (",o.length,")"]}),e.jsx("div",{className:"space-y-2",children:o.map(t=>e.jsxs(f,{to:`/artifact/${t.id}`,className:"block bg-[#080c16] border border-[#1d2839] rounded-lg p-3 hover:border-[#a6ed2a] transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:T[t.type]}}),e.jsx("span",{className:"text-xs uppercase text-gray-500",children:t.type}),t.rea_role&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded border",style:{color:b[t.rea_role],borderColor:b[t.rea_role]+"40"},children:k[t.rea_role]}),e.jsx("span",{className:"ml-auto text-xs text-gray-500",children:P[t.state]})]}),e.jsx("div",{className:"text-sm text-white group-hover:text-[#a6ed2a] transition-colors font-medium",children:t.title}),t.summary&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:t.summary}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:p(t.created_at)})]},t.id))})]}),n.length>0&&e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-xl p-6",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Contributions (",n.length,")"]}),e.jsx("div",{className:"space-y-2",children:n.map(t=>e.jsxs(f,{to:`/contribution/${t.id}`,className:"block bg-[#080c16] border border-[#1d2839] rounded-lg p-3 hover:border-[#a6ed2a] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.status==="complete"?"bg-[#a6ed2a]":t.status==="processing"?"bg-blue-400 animate-pulse":t.status==="error"?"bg-red-400":"bg-yellow-400"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:t.status}),e.jsx("span",{className:"ml-auto text-xs text-gray-600",children:p(t.created_at)})]}),e.jsx("p",{className:"text-xs text-gray-400 line-clamp-3",children:t.content})]},t.id))})]}),o.length===0&&n.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:"No activity yet from this participant."})]})}export{W as ParticipantProfile};
