import{e as w,r as i,j as e,L as c,s as x,a as h,A as p,R as _,b as k,d as j}from"./index-C1rFkvFB.js";import{C as N}from"./chevron-right-BQouldc4.js";import{U as C}from"./users-BKW1hYDI.js";function L(s){const t=Math.floor((Date.now()-new Date(s).getTime())/1e3);return t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}const u={e:{letter:"e/",name:"Ecology",subtitle:"Where We Are",tagName:"hlamt:E",color:"#4a8c6f"},H:{letter:"H/",name:"Human",subtitle:"Who's Here",tagName:"hlamt:H",color:"#c4956a"},L:{letter:"L/",name:"Language",subtitle:"How We Talk",tagName:"hlamt:L",color:"#a6ed2a"},A:{letter:"A/",name:"Tools & Infrastructure",subtitle:"What We're Building",tagName:"hlamt:A",color:"#8bbfff"},M:{letter:"M/",name:"Methodology",subtitle:"How We Work",tagName:"hlamt:M",color:"#7ccfb8"},T:{letter:"T/",name:"Training",subtitle:"What We're Learning",tagName:"hlamt:T",color:"#e8927c"}};function f({artifact:s}){const t=s.rea_role?h[s.rea_role]:"#333";return e.jsxs(c,{to:`/artifact/${s.id}`,className:"block rounded-lg border border-[#1d2839] bg-[#0a101d] p-4 hover:border-[#a6ed2a] transition-colors group",style:{borderLeftWidth:"3px",borderLeftColor:t},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full inline-block flex-shrink-0",style:{backgroundColor:p[s.type]}}),e.jsx("span",{className:"text-xs font-medium uppercase",style:{color:p[s.type]},children:s.type}),s.rea_role&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded border font-medium",style:{color:h[s.rea_role],borderColor:h[s.rea_role]+"40"},children:_[s.rea_role]}),s.agent_type&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded border",style:{color:j[s.agent_type],borderColor:j[s.agent_type]+"40"},children:k[s.agent_type]}),e.jsx("span",{className:"ml-auto text-xs text-gray-600",children:L(s.created_at)})]}),e.jsx("h3",{className:"font-medium text-white group-hover:text-[#a6ed2a] transition-colors mb-1",children:s.title}),s.summary&&e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:s.summary})]})}function g(s){let t=0;return s.display_name&&(t+=2),s.bio&&(t+=2),s.organization&&(t+=1),s.avatar_url&&(t+=1),s.skills&&s.skills.length>0&&(t+=1),s.interests&&s.interests.length>0&&(t+=1),s.social_links&&Object.keys(s.social_links).length>0&&(t+=1),s.email&&(t+=1),t}function A({artifacts:s}){const[t,n]=i.useState([]),[r,o]=i.useState(!1);return i.useEffect(()=>{x.from("participants").select("id, display_name, email, bio, organization, avatar_url, skills, interests, social_links").then(({data:a})=>{if(a){const d=a.sort((m,l)=>g(l)-g(m));n(d)}})},[]),e.jsxs("div",{className:"space-y-6",children:[t.length>0&&e.jsx("div",{className:"rounded-lg border border-[#1d2839] bg-[#0a101d] p-4 cursor-pointer hover:border-[#a6ed2a] transition-colors",onClick:()=>o(!r),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:[e.jsx("span",{className:"text-2xl font-bold mr-2",style:{color:"#c4956a"},children:t.length}),"participants registered"]}),e.jsx("span",{className:"text-gray-500 text-xs",children:r?"▲ Hide":"▼ Show Directory"})]})}),r&&t.length>0&&e.jsx("div",{className:"grid gap-2",children:t.map(a=>{const d=g(a);return e.jsxs(c,{to:`/p/${encodeURIComponent(a.display_name||a.id)}`,className:"flex items-center gap-3 p-3 rounded-lg border border-[#1d2839] bg-[#0a101d] hover:border-[#a6ed2a] transition-colors",children:[a.avatar_url?e.jsx("img",{src:a.avatar_url,alt:"",className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",style:{backgroundColor:"#c4956a30",color:"#c4956a"},children:(a.display_name||"?")[0].toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-medium text-sm truncate",children:a.display_name||"Anonymous"}),a.organization&&e.jsx("div",{className:"text-gray-500 text-xs truncate",children:a.organization}),a.bio&&e.jsx("div",{className:"text-gray-400 text-xs truncate mt-0.5",children:a.bio})]}),e.jsx("div",{className:"flex gap-0.5",children:Array.from({length:5}).map((m,l)=>e.jsx("div",{className:"w-1.5 h-4 rounded-sm",style:{backgroundColor:l<Math.ceil(d/2)?"#a6ed2a":"#1d2839"}},l))})]},a.id)})}),s.length>0?e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Human-tagged Knowledge Nodes"}),e.jsx("div",{className:"grid gap-3",children:s.map(a=>e.jsx(f,{artifact:a},a.id))})]}):e.jsx("div",{className:"text-center py-12 bg-[#0a101d] border border-[#1d2839] rounded-lg",children:e.jsxs("div",{className:"max-w-sm mx-auto",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#c4956a20"},children:e.jsx(C,{className:"w-8 h-8",style:{color:"#c4956a"}})}),e.jsx("h3",{className:"text-white font-semibold mb-2",children:"No human-tagged artifacts yet"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Contribute session notes to populate the Human dimension."}),e.jsx(c,{to:"/contribute",className:"inline-block bg-[#a6ed2a] text-[#080c16] px-4 py-2 rounded-lg text-sm font-medium hover:bg-[#b8f247] transition-colors",children:"Contribute"})]})})]})}function E({words:s,maxCount:t,label:n}){return s.length===0?null:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:[n," (",s.length," terms)"]}),e.jsx("div",{className:"space-y-1",children:s.map(r=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-300 w-32 sm:w-40 truncate font-mono",children:r.word}),e.jsx("div",{className:"flex-1 h-4 bg-[#0a101d] rounded overflow-hidden",children:e.jsx("div",{className:"h-full rounded",style:{width:`${r.count/t*100}%`,backgroundColor:"#a6ed2a",opacity:.6}})}),e.jsx("span",{className:"text-xs text-gray-500 w-8 text-right",children:r.count})]},r.word))})]})}function S({artifacts:s}){const[t,n]=i.useState([]);i.useEffect(()=>{async function o(){const{data:a}=await x.rpc("word_frequencies");a&&n(a.slice(0,25))}o()},[]);const r=t[0]?.count??1;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(E,{words:t,maxCount:r,label:"Emergent Vocabulary"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:["Language Knowledge Nodes (",s.length,")"]}),s.length>0?e.jsx("div",{className:"grid gap-3",children:s.map(o=>e.jsx(f,{artifact:o},o.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No language-tagged artifacts yet."})]})]})}const T={e:"Share observations about place, environment, or ecological context.",H:"Introduce yourself, share who you met, or describe collaborative dynamics.",L:"Define terms, propose frameworks, or capture shared vocabulary.",A:"Document tools, code, designs, or infrastructure being built.",M:"Describe processes, workflows, or coordination patterns.",T:"Share learnings, skill development, or transformative experiences."};function D({artifacts:s,dim:t}){const n=Object.keys(u).find(o=>u[o]===t),r=n?T[n]:"Be the first to contribute here.";return e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:["Knowledge Nodes (",s.length,")"]}),s.length===0?e.jsx("div",{className:"text-center py-12 bg-[#0a101d] border border-[#1d2839] rounded-lg",children:e.jsxs("div",{className:"max-w-sm mx-auto",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:t.color+"20"},children:e.jsx("span",{className:"text-3xl font-mono font-bold",style:{color:t.color},children:t.letter})}),e.jsxs("h3",{className:"text-white font-semibold mb-2",children:["No ",t.name.toLowerCase()," nodes yet"]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:r}),e.jsx(c,{to:"/contribute",className:"inline-block bg-[#a6ed2a] text-[#080c16] px-4 py-2 rounded-lg text-sm font-medium hover:bg-[#b8f247] transition-colors",children:"Contribute"})]})}):e.jsx("div",{className:"grid gap-3",children:s.map(o=>e.jsx(f,{artifact:o},o.id))})]})}function O(){const{dimension:s}=w(),[t,n]=i.useState([]),[r,o]=i.useState(!0),a=s?u[s]:null;return i.useEffect(()=>{if(!a)return;async function d(){o(!0);const{data:m}=await x.from("tags").select("id").eq("name",a.tagName).single();if(m){const{data:l}=await x.from("artifact_tags").select("artifact_id").eq("tag_id",m.id);if(l&&l.length>0){const y=l.map(v=>v.artifact_id),{data:b}=await x.from("artifacts").select("*").in("id",y).order("created_at",{ascending:!1});b&&n(b)}}o(!1)}d()},[a?.tagName]),a?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("nav",{className:"flex items-center gap-1.5 text-sm mb-3",children:[e.jsx(c,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Explore"}),e.jsx(N,{className:"w-3.5 h-3.5 text-gray-600"}),e.jsx("span",{className:"text-gray-400",children:"Graph Dimensions"}),e.jsx(N,{className:"w-3.5 h-3.5 text-gray-600"}),e.jsxs("span",{style:{color:a.color},children:[a.letter," ",a.name]})]}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx("span",{className:"font-mono text-3xl font-bold",style:{color:a.color},children:a.letter}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-gray-400",children:a.subtitle})]})]})]}),r?e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading..."}):e.jsxs(e.Fragment,{children:[s==="H"&&e.jsx(A,{artifacts:t}),s==="L"&&e.jsx(S,{artifacts:t}),s!=="H"&&s!=="L"&&e.jsx(D,{artifacts:t,dim:a})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-400",children:"Unknown dimension."}),e.jsx(c,{to:"/dimensions",className:"text-[#a6ed2a] hover:text-white text-sm mt-2 inline-block",children:"Back to Dimensions"})]})}export{O as DimensionView};
