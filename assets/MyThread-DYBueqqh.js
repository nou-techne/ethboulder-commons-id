import{c as J,r as l,s as d,j as e,L as j,f as ye,C as ve,A as E,R as we,a as Ce}from"./index-Bg-tw-Nl.js";import{P as _e}from"./plus-DEqEONde.js";import{L as H}from"./link-2-Bt6BWSFS.js";import{U as I}from"./users-Dy_vPf0k.js";import{S as G}from"./sparkles-rmJWdw0d.js";import{C as Se}from"./clock-CFT00QrA.js";import{F as ke}from"./file-text-ewxIcM0C.js";import{F as C}from"./flame-BIueZaL2.js";import{G as Te}from"./git-branch-CvTDqrif.js";const Ae=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$e=J("radio",Ae);const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],qe=J("target",Me);function Ee(_){const u=Math.floor((Date.now()-new Date(_).getTime())/1e3);return u<60?`${u}s ago`:u<3600?`${Math.floor(u/60)}m ago`:u<86400?`${Math.floor(u/3600)}h ago`:`${Math.floor(u/86400)}d ago`}function ze(){const[_,u]=l.useState(null),[T,K]=l.useState(null),[D,Q]=l.useState(""),[S,X]=l.useState([]),[Z,ee]=l.useState(0),[R,te]=l.useState([]),[A,se]=l.useState([]),[z,B]=l.useState(null),[$,Y]=l.useState({}),[N,ae]=l.useState("chain"),[v,M]=l.useState([]),[y,ie]=l.useState([]),[w,re]=l.useState({}),[ne,oe]=l.useState({}),[V,ce]=l.useState(0),[le,de]=l.useState(0);l.useEffect(()=>{d.auth.getSession().then(({data:s})=>{if(u(s.session),!s.session){L(null);return}me(s.session.user.id)});const t=d.channel("my-contributions").on("postgres_changes",{event:"*",schema:"public",table:"contributions"},()=>{L(T)}).subscribe();return()=>{d.removeChannel(t)}},[]),l.useEffect(()=>{T!==null&&L(T)},[T]);async function L(t){let s=d.from("contributions").select("id, content, title, status, created_at, processed_at, extraction, seq, chain_hash").order("created_at",{ascending:!1}).limit(30);t&&(s=s.eq("participant_id",t));const{data:o}=await s;se(o||[])}async function me(t){const{data:s}=await d.from("participants").select("id, name").eq("auth_user_id",t).single();if(!s)return;K(s.id),Q(s.name||"");const[{data:o},{data:m}]=await Promise.all([d.from("artifacts").select("*").or(`created_by.eq.${s.id},steward_id.eq.${s.id}`).order("created_at",{ascending:!1}).limit(50),d.from("commitments").select("*").eq("participant_id",s.id).order("created_at",{ascending:!1})]);if(X(o||[]),te(m||[]),o&&o.length>0){const n=o.map(c=>c.id),{count:x}=await d.from("artifact_relationships").select("*",{count:"exact",head:!0}).or(n.map(c=>`from_artifact_id.eq.${c}`).concat(n.map(c=>`to_artifact_id.eq.${c}`)).join(","));ee(x||0);const{data:p}=await d.from("coordination_interests").select("artifact_id").in("artifact_id",n),i={};for(const c of p||[])i[c.artifact_id]=(i[c.artifact_id]||0)+1;re(i);const[{count:k},{data:F}]=await Promise.all([d.from("coordination_interests").select("*",{count:"exact",head:!0}).eq("participant_id",s.id),d.from("coordination_interests").select("participant_id").in("artifact_id",n).neq("participant_id",s.id)]);ce(k||0);const O=new Set((F||[]).map(c=>c.participant_id));de(O.size);const{data:h}=await d.from("artifact_tags").select("artifact_id, tags!inner(name)").in("artifact_id",n),b={};for(const c of h||[]){const a=c.tags?.name;if(!a||a.startsWith("hlamt:"))continue;b[a]||(b[a]=[]);const r=o.find(g=>g.id===c.artifact_id);r&&!b[a].find(g=>g.id===r.id)&&b[a].push(r)}const P=Object.entries(b).map(([c,a])=>({tag:c,artifacts:a,coordinationCount:a.reduce((r,g)=>r+(i[g.id]||0),0)})).sort((c,a)=>a.artifacts.length-c.artifacts.length||a.coordinationCount-c.coordinationCount);ie(P),await xe(s.id)}}async function xe(t,s,o,m){const n=new Set(myArts.map(a=>a.id)),x=new Set;for(const a of myTagData){const r=a.tags?.name;r&&!r.startsWith("hlamt:")&&x.add(r)}if(x.size===0){M([]);return}const{data:p}=await d.from("artifact_tags").select("artifact_id, tags!inner(name)"),i={};for(const a of p||[]){const r=a.tags?.name;!r||!x.has(r)||n.has(a.artifact_id)||(i[r]||(i[r]=[]),i[r].push(a.artifact_id))}const k=[...new Set(Object.values(i).flat())];if(k.length===0){M([]);return}const{data:F}=await d.from("artifacts").select("id, title, created_by").in("id",k),{data:O}=await d.from("coordination_interests").select("artifact_id, participant_id").in("artifact_id",k),h={};for(const[a,r]of Object.entries(i))for(const g of r){const f=(F||[]).find(Ne=>Ne.id===g);!f?.created_by||f.created_by===t||(h[f.created_by]||(h[f.created_by]={sharedTags:new Set,sharedCoord:0,sharedTitles:[]}),h[f.created_by].sharedTags.add(a),h[f.created_by].sharedTitles.includes(f.title)||h[f.created_by].sharedTitles.push(f.title))}for(const a of O||[])h[a.participant_id]&&h[a.participant_id].sharedCoord++;const b=Object.keys(h);if(b.length===0){M([]);return}const{data:P}=await d.from("public_participants").select("id, name").in("id",b),c=b.map(a=>{const r=(P||[]).find(f=>f.id===a),g=h[a];return{id:a,name:r?.name||"Unknown",sharedTags:g.sharedTags.size,sharedCoordination:g.sharedCoord,sharedArtifactTitles:g.sharedTitles.slice(0,5)}}).sort((a,r)=>r.sharedTags+r.sharedCoordination*2-(a.sharedTags+a.sharedCoordination*2));M(c)}async function he(t){if($[t])return;const o=A.find(n=>n.id===t)?.extraction?.artifacts?.map(n=>n.title).filter(Boolean)||[];if(o.length===0){Y(n=>({...n,[t]:[]}));return}const{data:m}=await d.from("artifacts").select("*").in("title",o).order("created_at",{ascending:!0});if(Y(n=>({...n,[t]:m||[]})),m&&m.length>0){const n=m.map(i=>i.id),{data:x}=await d.from("coordination_interests").select("artifact_id").in("artifact_id",n);let p=0;for(const i of x||[])p++;oe(i=>({...i,[t]:p}))}}function ge(t){z===t?B(null):(B(t),he(t))}const W={pending:{label:"Pending",color:"text-yellow-300",bg:"bg-yellow-900/30"},processing:{label:"Extracting...",color:"text-blue-300",bg:"bg-blue-900/30"},complete:{label:"Complete",color:"text-green-300",bg:"bg-green-900/30"},error:{label:"Error",color:"text-red-300",bg:"bg-red-900/30"}},fe=A.length,U=S.length;R.length;const q=Object.values(w).reduce((t,s)=>t+s,0),ue=[{value:fe,label:"Chain Entries",color:"text-[#a6ed2a]"},{value:U,label:"Nodes Extracted",color:"text-white"},{value:Z,label:"Edges",color:"text-purple-400"},{value:q,label:"Coord Signals",color:"text-orange-400"}],pe=[{value:v.length,label:"Connections",color:"text-[#c4956a]"},{value:v.reduce((t,s)=>t+s.sharedTags,0),label:"Shared Themes",color:"text-white"},{value:v.reduce((t,s)=>t+s.sharedCoordination,0),label:"Shared Signals",color:"text-orange-400"},{value:U,label:"My Artifacts",color:"text-[#a6ed2a]"}],be=[{value:y.length,label:"Clusters",color:"text-cyan-400"},{value:y.reduce((t,s)=>t+s.artifacts.length,0),label:"Clustered Nodes",color:"text-white"},{value:y.filter(t=>t.coordinationCount>0).length,label:"Active Clusters",color:"text-orange-400"},{value:q,label:"Total Signals",color:"text-[#a6ed2a]"}],je=N==="chain"?ue:N==="social"?pe:be;return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Activity"}),e.jsx("p",{className:"text-gray-400 text-sm",children:_?N==="chain"?"Your contributions and their chain of extracted knowledge.":N==="social"?"Your connections through shared themes and coordination.":"Your artifacts organized by conceptual neighborhoods.":"All contributions across the commons."})]}),e.jsxs(j,{to:"/contribute",className:"bg-[#a6ed2a] text-[#080c16] hover:bg-[#b8f247] px-4 py-2 rounded-lg text-sm transition-colors inline-flex items-center gap-1.5",children:[e.jsx(_e,{className:"w-4 h-4"})," Contribute"]})]}),e.jsx("div",{className:"flex gap-2 mb-4",children:[{mode:"chain",label:"Chain",icon:H},{mode:"social",label:"Social",icon:I},{mode:"semantic",label:"Semantic",icon:G}].map(({mode:t,label:s,icon:o})=>e.jsxs("button",{onClick:()=>ae(t),className:`flex items-center gap-1.5 px-4 py-2 text-sm rounded-lg transition-colors ${N===t?"bg-[#a6ed2a] text-[#080c16] font-medium":"bg-[#0a101d] border border-[#1d2839] text-gray-400 hover:text-white hover:border-gray-500"}`,children:[e.jsx(o,{className:"w-4 h-4"}),s]},t))}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:je.map((t,s)=>e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-lg p-4 text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t.color}`,children:t.value}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.label})]},s))}),_&&(V>0||q>0)&&e.jsxs("div",{className:"bg-[#0a101d] border border-orange-500/20 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx($e,{className:"w-4 h-4 text-orange-400"}),e.jsx("span",{className:"text-sm font-semibold text-gray-300 uppercase tracking-wider",children:"My Signals"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-orange-400",children:V}),e.jsx("div",{className:"text-xs text-gray-500",children:"Given"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-orange-400",children:q}),e.jsx("div",{className:"text-xs text-gray-500",children:"Received"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-orange-400",children:le}),e.jsx("div",{className:"text-xs text-gray-500",children:"Reach"})]})]})]}),!_&&e.jsxs("div",{className:"bg-[#0a101d] border border-[#a6ed2a]/30 rounded-lg p-4 mb-6 text-sm text-gray-400",children:[e.jsx(j,{to:"/auth",className:"text-[#a6ed2a] hover:text-white font-medium",children:"Sign in"})," to see only your activity and track your contributions over time."]}),R.length>0&&e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-300 mb-3 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-amber-400"}),"Commitments"]}),e.jsx("div",{className:"space-y-2",children:R.map(t=>e.jsx("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:t.description}),t.due_date&&e.jsxs("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-gray-500",children:[e.jsx(Se,{className:"w-3 h-3"}),"Due: ",new Date(t.due_date).toLocaleDateString()]})]}),e.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium flex-shrink-0 ${t.status==="fulfilled"?"bg-green-900/30 text-green-300":t.status==="in_progress"?"bg-blue-900/30 text-blue-300":t.status==="broken"?"bg-red-900/30 text-red-300":"bg-gray-800 text-gray-400"}`,children:t.status==="in_progress"?"In Progress":t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})},t.id))})]}),N==="chain"&&e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-300 mb-3 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-[#a6ed2a]"}),"Chain Timeline"]}),A.length===0?e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-xl p-8 text-center",children:[e.jsx(ke,{className:"w-10 h-10 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"No contributions yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 mb-4",children:"Share an observation, idea, or commitment to start your chain."}),e.jsx(j,{to:"/contribute",className:"inline-block bg-[#a6ed2a] text-[#080c16] px-6 py-2 rounded-lg hover:bg-[#b8f247] text-sm",children:"Make your first contribution"})]}):e.jsx("div",{className:"space-y-2",children:A.map(t=>{const s=W[t.status]||W.pending,o=t.extraction||{},m=o.artifacts?.length||0,n=o.relationships?.length||0,x=z===t.id,p=ne[t.id]||0;return e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-lg overflow-hidden",children:[e.jsxs("div",{onClick:()=>t.status==="complete"?ge(t.id):void 0,className:`w-full text-left p-4 ${t.status==="complete"?"cursor-pointer hover:bg-[#111827]":""} transition-colors`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.seq&&e.jsxs("span",{className:"text-xs font-mono text-[#a6ed2a] bg-[#a6ed2a]/10 px-1.5 py-0.5 rounded",children:["#",t.seq]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${s.bg} ${s.color}`,children:s.label}),t.status==="complete"&&m>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"text-[#a6ed2a] font-mono font-medium",children:m})," ",m===1?"node":"nodes",n>0&&e.jsxs(e.Fragment,{children:[" · ",e.jsx("span",{className:"text-[#a6ed2a] font-mono font-medium",children:n})," ",n===1?"edge":"edges"]})]}),p>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-orange-400",children:[e.jsx(C,{className:"w-3 h-3"})," ",p]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.chain_hash&&e.jsx("span",{className:"text-xs font-mono text-gray-600",children:t.chain_hash.slice(0,8)}),e.jsx("span",{className:"text-xs text-gray-600",children:Ee(t.created_at)}),t.status==="complete"&&(x?e.jsx(ye,{className:"w-4 h-4 text-gray-500"}):e.jsx(ve,{className:"w-4 h-4 text-gray-500"}))]})]}),t.title&&e.jsx("p",{className:"text-sm font-medium text-white mb-1",children:t.title}),e.jsx("p",{className:`text-xs text-gray-400 ${x?"":"line-clamp-2"}`,children:t.content}),t.status==="complete"&&e.jsx(j,{to:`/contribution/${t.id}`,className:"text-xs text-[#a6ed2a] hover:text-white mt-2 inline-block",onClick:i=>i.stopPropagation(),children:"View full detail"})]}),x&&t.status==="complete"&&e.jsxs("div",{className:"border-t border-[#1d2839] p-4 bg-[#060a14]",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Extracted Artifacts"}),$[t.id]?$[t.id].length>0?e.jsx("div",{className:"space-y-2",children:$[t.id].map(i=>e.jsxs(j,{to:`/artifact/${i.id}`,className:"flex items-center gap-3 p-2 rounded-lg hover:bg-[#0a101d] transition-colors",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:E[i.type]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate",children:i.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"text-xs text-gray-500",children:i.type.charAt(0).toUpperCase()+i.type.slice(1)}),i.rea_role&&e.jsx("span",{className:"text-xs",style:{color:Ce[i.rea_role]},children:we[i.rea_role]})]})]}),w[i.id]>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-orange-400",children:[e.jsx(C,{className:"w-3 h-3"})," ",w[i.id]]})]},i.id))}):e.jsx("p",{className:"text-xs text-gray-500",children:"No artifacts extracted."}):e.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Loading..."})]})]},t.id)})})]}),N==="social"&&e.jsxs("section",{className:"mb-8",children:[D&&e.jsxs("div",{className:"bg-[#0a101d] border border-[#c4956a]/40 rounded-xl p-5 mb-4 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-[#c4956a] flex items-center justify-center text-[#080c16] text-xl font-bold mx-auto mb-2",children:D.split(" ").map(t=>t[0]).join("").slice(0,2).toUpperCase()}),e.jsx("div",{className:"font-semibold text-white",children:D}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[U," artifacts · ",v.length," connections"]})]}),e.jsxs("h2",{className:"text-sm font-semibold text-gray-300 mb-3 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-[#c4956a]"}),"Connections"]}),v.length===0?e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-xl p-8 text-center",children:[e.jsx(I,{className:"w-10 h-10 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"No connections yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"As others contribute, shared themes will reveal your connections."})]}):e.jsx("div",{className:"space-y-2",children:v.map(t=>e.jsxs(j,{to:`/p/${t.id}`,className:"flex items-center gap-4 bg-[#0a101d] border border-[#1d2839] rounded-lg p-4 hover:border-[#c4956a] transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#c4956a]/30 flex items-center justify-center text-[#c4956a] text-sm font-bold flex-shrink-0",children:t.name.split(" ").map(s=>s[0]).join("").slice(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:[t.sharedTags," shared ",t.sharedTags===1?"theme":"themes"]}),t.sharedCoordination>0&&e.jsxs("span",{className:"flex items-center gap-1 text-orange-400",children:[e.jsx(C,{className:"w-3 h-3"})," ",t.sharedCoordination," mutual signals"]})]}),t.sharedArtifactTitles.length>0&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:["via: ",t.sharedArtifactTitles.join(", ")]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-1.5 rounded-full bg-[#1d2839] overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-[#c4956a]",style:{width:`${Math.min(100,(t.sharedTags+t.sharedCoordination*2)*20)}%`}})})})]},t.id))}),S.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-300 mb-3 mt-6 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4 text-blue-400"}),"My Artifacts"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:S.map(t=>e.jsxs(j,{to:`/artifact/${t.id}`,className:"flex items-center gap-3 bg-[#0a101d] border border-[#1d2839] rounded-lg p-3 hover:border-[#a6ed2a] transition-colors",children:[e.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:E[t.type]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:t.title}),e.jsx("div",{className:"text-xs text-gray-500",children:t.type.charAt(0).toUpperCase()+t.type.slice(1)})]}),w[t.id]>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-orange-400 flex-shrink-0",children:[e.jsx(C,{className:"w-3 h-3"})," ",w[t.id]]})]},t.id))})]})]}),N==="semantic"&&e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-300 mb-3 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-cyan-400"}),"Conceptual Neighborhoods"]}),y.length===0?e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-xl p-8 text-center",children:[e.jsx(G,{className:"w-10 h-10 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"No clusters yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"As your contributions are tagged, conceptual neighborhoods will emerge."})]}):e.jsx("div",{className:"space-y-3",children:y.map(t=>e.jsx("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-lg overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-mono font-medium text-cyan-400",children:t.tag}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.artifacts.length," ",t.artifacts.length===1?"artifact":"artifacts"]})]}),t.coordinationCount>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-orange-400",children:[e.jsx(C,{className:"w-3 h-3"})," ",t.coordinationCount," signals"]})]}),e.jsx("div",{className:"w-full h-1 rounded-full bg-[#1d2839] mb-3 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${Math.min(100,t.coordinationCount*15+t.artifacts.length*10)}%`,background:t.coordinationCount>0?"linear-gradient(90deg, #a6ed2a, #f59e0b)":"#a6ed2a40"}})}),e.jsx("div",{className:"space-y-1",children:t.artifacts.map(s=>e.jsxs(j,{to:`/artifact/${s.id}`,className:"flex items-center gap-2 p-1.5 rounded hover:bg-[#1d2839]/50 transition-colors",children:[e.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:E[s.type]}}),e.jsx("span",{className:"text-sm text-gray-300 truncate",children:s.title}),w[s.id]>0&&e.jsx(C,{className:"w-3 h-3 text-orange-400 flex-shrink-0"})]},s.id))})]})},t.tag))}),S.filter(t=>!y.some(s=>s.artifacts.find(o=>o.id===t.id))).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-300 mb-3 mt-6 uppercase tracking-wider",children:"Unclustered"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:S.filter(t=>!y.some(s=>s.artifacts.find(o=>o.id===t.id))).map(t=>e.jsxs(j,{to:`/artifact/${t.id}`,className:"flex items-center gap-3 bg-[#0a101d] border border-[#1d2839] rounded-lg p-3 hover:border-cyan-400/50 transition-colors",children:[e.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:E[t.type]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:t.title}),e.jsx("div",{className:"text-xs text-gray-500",children:t.type.charAt(0).toUpperCase()+t.type.slice(1)})]})]},t.id))})]})]})]})}export{ze as MyThread};
