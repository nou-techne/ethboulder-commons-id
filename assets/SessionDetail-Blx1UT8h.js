import{e as f,r as a,s as N,j as e,L as i}from"./index-Bg-tw-Nl.js";import{C as v}from"./calendar-CSFtkAbq.js";import{M as y}from"./map-pin-DWMnA1go.js";import{U as m}from"./users-Dy_vPf0k.js";import{P as w}from"./pen-line-CqbmdFr_.js";import{G as _}from"./git-branch-CvTDqrif.js";import{F as S}from"./file-text-ewxIcM0C.js";function A(){const{id:n}=f(),[t,p]=a.useState(null),[d,h]=a.useState([]),[l,j]=a.useState([]),[c,g]=a.useState([]),[b,o]=a.useState(!0);a.useEffect(()=>{n&&u()},[n]);async function u(){const{data:s,error:r}=await N.rpc("get_session_detail",{p_session_id:n});if(r){console.error("Error loading session:",r),o(!1);return}s&&(p(s.session),h(s.artifacts||[]),j(s.contributions||[]),g(s.participants||[])),o(!1)}function x(s){return s?new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):""}return b?e.jsx("div",{className:"text-center text-gray-500 py-12",children:"Loading session..."}):t?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:t.title}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:[t.time_start&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsxs("span",{children:[x(t.time_start),t.time_end&&` - ${x(t.time_end)}`]})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:t.location})]}),t.track&&e.jsx("div",{className:"px-2 py-1 bg-[#1d2839] rounded text-xs",children:t.track}),t.session_type&&e.jsx("div",{className:"px-2 py-1 bg-[#1d2839] rounded text-xs capitalize",children:t.session_type})]})]}),t.description&&e.jsx("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:t.description})}),t.speakers&&t.speakers.length>0&&e.jsxs("div",{className:"bg-[#0a101d] border border-[#1d2839] rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{className:"w-4 h-4 text-[#a6ed2a]"}),e.jsx("h2",{className:"font-medium",children:"Speakers"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.speakers.map((s,r)=>e.jsx("span",{className:"px-2 py-1 bg-[#1d2839] rounded text-sm text-gray-300",children:s},r))})]}),e.jsx("div",{className:"mb-6",children:e.jsxs(i,{to:`/contribute?session=${n}`,className:"inline-flex items-center gap-2 px-4 py-2 bg-[#a6ed2a] text-[#080c16] rounded-lg hover:bg-[#b8f247] transition-colors font-medium",children:[e.jsx(w,{className:"w-4 h-4"}),"Contribute to this session"]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_,{className:"w-5 h-5 text-[#a6ed2a]"}),e.jsxs("h2",{className:"font-bold",children:["Artifacts (",d.length,")"]})]}),d.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No artifacts yet"}):e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsxs(i,{to:`/artifact/${s.id}`,className:"block bg-[#0a101d] border border-[#1d2839] rounded-lg p-3 hover:border-[#a6ed2a] transition-colors",children:[e.jsx("div",{className:"font-medium text-sm mb-1",children:s.title}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsx("span",{className:"px-2 py-0.5 bg-[#1d2839] rounded",children:s.type}),e.jsx("span",{className:"px-2 py-0.5 bg-[#1d2839] rounded",children:s.rea_role})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(S,{className:"w-5 h-5 text-[#a6ed2a]"}),e.jsxs("h2",{className:"font-bold",children:["Contributions (",l.length,")"]})]}),l.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No contributions yet"}):e.jsx("div",{className:"space-y-2",children:l.map(s=>e.jsxs(i,{to:`/contribution/${s.id}`,className:"block bg-[#0a101d] border border-[#1d2839] rounded-lg p-3 hover:border-[#a6ed2a] transition-colors",children:[e.jsxs("p",{className:"text-sm text-gray-300 line-clamp-2 mb-2",children:[s.content.substring(0,150),"..."]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.participant_name&&e.jsx("span",{children:s.participant_name}),e.jsx("span",{className:s.status==="complete"?"text-green-500":"text-yellow-500",children:s.status})]})]},s.id))})]})]}),c.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(m,{className:"w-5 h-5 text-[#a6ed2a]"}),e.jsxs("h2",{className:"font-bold",children:["Participants (",c.length,")"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(s=>e.jsx(i,{to:`/p/${s.id}`,className:"px-3 py-1.5 bg-[#0a101d] border border-[#1d2839] rounded-lg hover:border-[#a6ed2a] transition-colors text-sm",children:s.name},s.id))})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-400",children:"Session not found"}),e.jsx(i,{to:"/",className:"text-[#a6ed2a] hover:underline mt-4 inline-block",children:"Return to Explore"})]})}export{A as SessionDetail};
