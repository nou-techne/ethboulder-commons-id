import{c as i,r as o,j as e,B as y}from"./index-sqjsVm1m.js";import{C as n,a as N,b as c}from"./Card-DABL0hDQ.js";import{I as w}from"./Input-eidyvZ4a.js";import{P as _}from"./plus-BX9PTZlR.js";import{T as $}from"./trash-2-D0nsSbdY.js";const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],E=i("circle-question-mark",A);const I=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],k=i("download",I);const R=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],q=i("external-link",R);const F=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],T=i("share-2",F);const z=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],H=i("upload",z);const L=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],O=i("wifi-off",L);const U=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],b=i("wifi",U);function W({peers:h,onAddPeer:g,onRemovePeer:f,onSyncPeer:m}){const[p,x]=o.useState(!1),[l,r]=o.useState(""),[t,a]=o.useState("");function S(){!l||!t||(g?.({name:l,endpoint:t,status:"unknown",capabilities:["sync","search","publish"]}),r(""),a(""),x(!1))}function M(s,d){confirm(`Remove peer "${d}"? This cannot be undone.`)&&f?.(s)}function C(s){switch(s){case"online":return e.jsx(b,{className:"w-4 h-4 text-green-400"});case"offline":return e.jsx(O,{className:"w-4 h-4 text-red-400"});default:return e.jsx(E,{className:"w-4 h-4 text-gray-500"})}}function D(s){if(!s)return"Never";const d=new Date(s),j=Date.now()-d.getTime(),u=Math.floor(j/6e4),v=Math.floor(j/36e5),P=Math.floor(j/864e5);return u<1?"Just now":u<60?`${u}m ago`:v<24?`${v}h ago`:`${P}d ago`}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Peer Registry"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Manage federated peer nodes"})]}),e.jsx(y,{onClick:()=>x(!p),icon:e.jsx(_,{className:"w-4 h-4"}),children:"Add Peer"})]}),p&&e.jsxs(n,{children:[e.jsx(N,{children:e.jsx("h3",{className:"font-bold",children:"New Peer"})}),e.jsxs(c,{className:"space-y-3",children:[e.jsx(w,{label:"Peer Name",value:l,onChange:s=>r(s.target.value),placeholder:"ETHDenver Commons"}),e.jsx(w,{label:"Endpoint URL",value:t,onChange:s=>a(s.target.value),placeholder:"https://commons.ethdenver.com/api/federation"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:S,disabled:!l||!t,children:"Add Peer"}),e.jsx(y,{variant:"ghost",onClick:()=>x(!1),children:"Cancel"})]})]})]}),h.length===0?e.jsx(n,{children:e.jsxs(c,{className:"text-center py-8 text-gray-500",children:[e.jsx(b,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No peers configured"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a peer to start federating"})]})}):e.jsx("div",{className:"space-y-3",children:h.map(s=>e.jsx(n,{children:e.jsx(c,{children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1",children:C(s.status)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-white",children:s.name}),e.jsx("a",{href:s.endpoint,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#a6ed2a]",children:e.jsx(q,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"text-xs text-gray-400 mb-2 truncate",children:s.endpoint}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.jsxs("span",{className:"text-gray-500",children:["Last sync: ",D(s.lastSeen)]}),e.jsx("span",{className:"text-gray-600",children:"•"}),e.jsxs("span",{className:"text-gray-500",children:[s.capabilities.length," capabilities"]}),s.metadata?.convergences&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-600",children:"•"}),e.jsxs("span",{className:"text-gray-500",children:[s.metadata.convergences.length," convergences"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.capabilities.map(d=>e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-[#0a101d] text-gray-400 border border-[#1d2839]",children:d},d))})]}),e.jsxs("div",{className:"flex gap-2",children:[m&&e.jsx("button",{onClick:()=>m(s.id),className:"text-gray-400 hover:text-[#a6ed2a] px-2 py-1 text-sm",disabled:s.status==="offline",children:"Sync"}),e.jsx("button",{onClick:()=>M(s.id,s.name),className:"text-gray-400 hover:text-red-400 p-2",children:e.jsx($,{className:"w-4 h-4"})})]})]})})},s.id))})]})}function X(){const[h]=o.useState([{id:"peer1",name:"ETHDenver Commons",endpoint:"https://commons.ethdenver.com/api/federation",status:"online",capabilities:["sync","search","publish"],lastSeen:new Date(Date.now()-3e5).toISOString(),metadata:{convergences:["ethdenver_2026"]}},{id:"peer2",name:"Devcon Commons",endpoint:"https://commons.devcon.org/api/federation",status:"offline",capabilities:["sync","search"],lastSeen:new Date(Date.now()-864e5).toISOString()}]),[g,f]=o.useState({contributions:!0,threads:!0,artifacts:!0,participants:!1,messages:!1}),[m,p]=o.useState({contributions:!0,threads:!0,artifacts:!0,participants:!1,messages:!1});function x(t){f(a=>({...a,[t]:!a[t]}))}function l(t){p(a=>({...a,[t]:!a[t]}))}const r={totalSynced:1247,lastSync:new Date(Date.now()-18e4).toISOString(),pendingUp:12,pendingDown:8};return e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"w-6 h-6 text-[#a6ed2a]"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Federation"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Connect with peer nodes to share and sync convergence data"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(n,{children:e.jsxs(c,{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Items Synced"}),e.jsx("div",{className:"text-2xl font-bold",children:r.totalSynced})]})}),e.jsx(n,{children:e.jsxs(c,{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Last Sync"}),e.jsxs("div",{className:"text-sm font-medium",children:[Math.floor((Date.now()-new Date(r.lastSync).getTime())/6e4),"m ago"]})]})}),e.jsx(n,{children:e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-[#a6ed2a]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Pending Upload"}),e.jsx("div",{className:"text-xl font-bold",children:r.pendingUp})]})]})})}),e.jsx(n,{children:e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Pending Download"}),e.jsx("div",{className:"text-xl font-bold",children:r.pendingDown})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(n,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-[#a6ed2a]"}),e.jsx("h3",{className:"font-bold",children:"What to Share"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"space-y-3",children:Object.entries(g).map(([t,a])=>e.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[e.jsx("span",{className:"text-sm text-gray-300 group-hover:text-white capitalize",children:t}),e.jsx("button",{onClick:()=>x(t),className:`w-12 h-6 rounded-full transition-colors ${a?"bg-[#a6ed2a]":"bg-[#1d2839]"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]},t))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-[#1d2839] text-xs text-gray-500",children:"Content types enabled for sharing will be sent to connected peers during sync"})]})]}),e.jsxs(n,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"font-bold",children:"What to Accept"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"space-y-3",children:Object.entries(m).map(([t,a])=>e.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[e.jsx("span",{className:"text-sm text-gray-300 group-hover:text-white capitalize",children:t}),e.jsx("button",{onClick:()=>l(t),className:`w-12 h-6 rounded-full transition-colors ${a?"bg-blue-500":"bg-[#1d2839]"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]},t))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-[#1d2839] text-xs text-gray-500",children:"Content types enabled for accepting will be received from connected peers during sync"})]})]})]}),e.jsx(W,{peers:h,onAddPeer:t=>{console.log("Add peer:",t)},onRemovePeer:t=>{console.log("Remove peer:",t)},onSyncPeer:t=>{console.log("Sync peer:",t)}})]})}export{X as default};
