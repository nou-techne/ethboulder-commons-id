import{e as T,r as d,u as D,j as e,L as h,s as x,a as N,A as S,R as E,b as H,d as L}from"./index-sqjsVm1m.js";import{C as A}from"./chevron-right-ReVftVex.js";import{U as W}from"./users-DQpOb_B4.js";function O(t){const a=Math.floor((Date.now()-new Date(t).getTime())/1e3);return a<60?`${a}s ago`:a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:`${Math.floor(a/86400)}d ago`}const v={e:{letter:"e/",name:"Ecology",subtitle:"Where We Are",tagName:"hlamt:e",color:"#4a8c6f"},H:{letter:"H/",name:"Human",subtitle:"Who's Here",tagName:"hlamt:H",color:"#c4956a"},L:{letter:"L/",name:"Language",subtitle:"How We Talk",tagName:"hlamt:L",color:"#a6ed2a"},A:{letter:"A/",name:"Tools & Infrastructure",subtitle:"What We're Building",tagName:"hlamt:A",color:"#8bbfff"},M:{letter:"M/",name:"Methodology",subtitle:"How We Work",tagName:"hlamt:M",color:"#7ccfb8"},T:{letter:"T/",name:"Training",subtitle:"What We're Learning",tagName:"hlamt:T",color:"#e8927c"},S:{letter:"S/",name:"Sessions",subtitle:"Where Convergence Happens",tagName:"sessions",color:"#c084fc"}};function j({artifact:t}){const a=t.rea_role?N[t.rea_role]:"#333";return e.jsxs(h,{to:`/artifact/${t.id}`,className:"block rounded-lg border border-[#1d2839] bg-[#0a101d] p-4 hover:border-[#a6ed2a] transition-colors group",style:{borderLeftWidth:"3px",borderLeftColor:a},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full inline-block flex-shrink-0",style:{backgroundColor:S[t.type]}}),e.jsx("span",{className:"text-xs font-medium uppercase",style:{color:S[t.type]},children:t.type}),t.rea_role&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded border font-medium",style:{color:N[t.rea_role],borderColor:N[t.rea_role]+"40"},children:E[t.rea_role]}),t.agent_type&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded border",style:{color:L[t.agent_type],borderColor:L[t.agent_type]+"40"},children:H[t.agent_type]}),e.jsx("span",{className:"ml-auto text-xs text-gray-600",children:O(t.created_at)})]}),e.jsx("h3",{className:"font-medium text-white group-hover:text-[#a6ed2a] transition-colors mb-1",children:t.title}),t.summary&&e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:t.summary})]})}function y(t){let a=0;return t.name&&(a+=2),t.bio&&(a+=2),t.affiliation&&(a+=1),t.skills&&t.skills.length>0&&(a+=1),t.interests&&t.interests.length>0&&(a+=1),t.email&&(a+=1),t.location&&(a+=1),a}function M({artifacts:t}){const[a,c]=d.useState([]),[n,i]=d.useState(!0);return d.useEffect(()=>{x.from("public_participants").select("id, name, bio, affiliation, skills, interests, location, role").then(({data:r})=>{if(r){const o=r.sort((l,s)=>y(s)-y(l));c(o)}})},[]),e.jsxs("div",{className:"space-y-6",children:[a.length>0&&e.jsx("div",{className:"rounded-lg border border-[#1d2839] bg-[#0a101d] p-4 cursor-pointer hover:border-[#a6ed2a] transition-colors",onClick:()=>i(!n),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:[e.jsx("span",{className:"text-2xl font-bold mr-2",style:{color:"#c4956a"},children:a.length}),"participants registered"]}),e.jsx("span",{className:"text-gray-500 text-xs",children:n?"▲ Hide":"▼ Show Directory"})]})}),n&&a.length>0&&e.jsx("div",{className:"grid gap-2",children:a.map(r=>{const o=y(r);return e.jsxs(h,{to:`/p/${encodeURIComponent(r.name||r.id)}`,className:"flex items-center gap-3 p-3 rounded-lg border border-[#1d2839] bg-[#0a101d] hover:border-[#a6ed2a] transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",style:{backgroundColor:"#c4956a30",color:"#c4956a"},children:(r.name||"?")[0].toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium text-sm truncate",children:r.name||"Anonymous"}),r.role==="steward"&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-amber-900/30 border border-amber-700/30 text-amber-400",children:"Steward"})]}),r.affiliation&&e.jsx("div",{className:"text-gray-500 text-xs truncate",children:r.affiliation}),r.bio&&e.jsx("div",{className:"text-gray-400 text-xs truncate mt-0.5",children:r.bio})]}),e.jsx("div",{className:"flex gap-0.5",children:Array.from({length:5}).map((l,s)=>e.jsx("div",{className:"w-1.5 h-4 rounded-sm",style:{backgroundColor:s<Math.ceil(o/2)?"#a6ed2a":"#1d2839"}},s))})]},r.id)})}),t.length>0?e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Human-tagged Knowledge Nodes"}),e.jsx("div",{className:"grid gap-3",children:t.map(r=>e.jsx(j,{artifact:r},r.id))})]}):e.jsx("div",{className:"text-center py-12 bg-[#0a101d] border border-[#1d2839] rounded-lg",children:e.jsxs("div",{className:"max-w-sm mx-auto",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#c4956a20"},children:e.jsx(W,{className:"w-8 h-8",style:{color:"#c4956a"}})}),e.jsx("h3",{className:"text-white font-semibold mb-2",children:"No human-tagged artifacts yet"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Contribute session notes to populate the Human dimension."}),e.jsx(h,{to:"/contribute",className:"inline-block bg-[#a6ed2a] text-[#080c16] px-4 py-2 rounded-lg text-sm font-medium hover:bg-[#b8f247] transition-colors",children:"Contribute"})]})})]})}function R({words:t,maxCount:a,label:c}){return t.length===0?null:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:[c," (",t.length," terms)"]}),e.jsx("div",{className:"space-y-1",children:t.map(n=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-300 w-32 sm:w-40 truncate font-mono",children:n.word}),e.jsx("div",{className:"flex-1 h-4 bg-[#0a101d] rounded overflow-hidden",children:e.jsx("div",{className:"h-full rounded",style:{width:`${n.count/a*100}%`,backgroundColor:"#a6ed2a",opacity:.6}})}),e.jsx("span",{className:"text-xs text-gray-500 w-8 text-right",children:n.count})]},n.word))})]})}function P({artifacts:t}){const[a,c]=d.useState([]);d.useEffect(()=>{async function i(){const{data:r}=await x.rpc("word_frequencies");r&&c(r.slice(0,25))}i()},[]);const n=a[0]?.count??1;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(R,{words:a,maxCount:n,label:"Emergent Vocabulary"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:["Language Knowledge Nodes (",t.length,")"]}),t.length>0?e.jsx("div",{className:"grid gap-3",children:t.map(i=>e.jsx(j,{artifact:i},i.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No language-tagged artifacts yet."})]})]})}const b={Privacy:"#6366f1",Creativity:"#ec4899","Public Goods Funding":"#22c55e","Ethereum Localism":"#f59e0b","d/acc":"#ef4444",DeSci:"#06b6d4","AI & Society":"#8b5cf6","Onchain Organizations":"#14b8a6","DAO Tooling":"#3b82f6",Hackathon:"#f97316"};function $(t){return new Date(t).toLocaleString("en-US",{weekday:"short",hour:"numeric",minute:"2-digit"})}function I({artifacts:t}){const[a,c]=d.useState([]),[n,i]=d.useState(""),[r,o]=d.useState([]);d.useEffect(()=>{async function s(){const{data:m}=await x.from("sessions").select("*").order("time_start",{ascending:!0,nullsFirst:!1});if(m){c(m);const g=[...new Set(m.map(f=>f.track).filter(Boolean))];o(g.sort())}}s()},[]);const l=n?a.filter(s=>s.track===n):a;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl font-bold",style:{color:"#c084fc"},children:a.length}),e.jsx("span",{className:"text-gray-400 text-sm",children:"sessions from ETHBoulder 2026"})]}),r.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.jsx("button",{onClick:()=>i(""),className:`px-2.5 py-1 rounded text-xs transition-colors ${n?"bg-[#1d2839] text-gray-400 hover:text-white":"bg-[#c084fc] text-[#080c16] font-medium"}`,children:"All"}),r.map(s=>e.jsx("button",{onClick:()=>i(n===s?"":s),className:`px-2.5 py-1 rounded text-xs transition-colors ${n===s?"font-medium text-[#080c16]":"text-gray-400 hover:text-white"}`,style:n===s?{backgroundColor:b[s]||"#c084fc"}:{backgroundColor:"#1d2839"},children:s},s))]})]}),e.jsx("div",{className:"grid gap-2",children:l.map(s=>e.jsxs(h,{to:`/session/${s.id}`,className:"block rounded-lg border border-[#1d2839] bg-[#0a101d] p-4 hover:border-[#c084fc] transition-colors",style:{borderLeftWidth:"3px",borderLeftColor:b[s.track||""]||"#c084fc"},children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-1.5",children:[e.jsx("h3",{className:"text-white font-semibold text-sm",children:s.title}),s.session_type&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[#1d2839] text-gray-400 capitalize whitespace-nowrap",children:s.session_type})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1.5 text-xs text-gray-500",children:[s.speakers&&s.speakers.length>0&&e.jsx("span",{className:"text-gray-300",children:s.speakers.join(", ")}),s.time_start&&e.jsx("span",{className:"flex items-center gap-1",children:e.jsx("span",{children:$(s.time_start)})}),s.location&&e.jsx("span",{children:s.location})]}),s.track&&e.jsx("span",{className:"inline-block text-[10px] px-1.5 py-0.5 rounded border mb-1.5",style:{backgroundColor:(b[s.track]||"#c084fc")+"15",color:b[s.track]||"#c084fc",borderColor:(b[s.track]||"#c084fc")+"30"},children:s.track}),s.description&&e.jsx("p",{className:"text-gray-400 text-xs line-clamp-2",children:s.description}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:s.tags.map((m,g)=>e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[#1d2839] text-gray-500",children:m},g))})]},s.id))}),t.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:["Session Artifacts (",t.length,")"]}),e.jsx("div",{className:"grid gap-3",children:t.map(s=>e.jsx(j,{artifact:s},s.id))})]})]})}const B={e:"Share observations about place, environment, or ecological context.",H:"Introduce yourself, share who you met, or describe collaborative dynamics.",L:"Define terms, propose frameworks, or capture shared vocabulary.",A:"Document tools, code, designs, or infrastructure being built.",M:"Describe processes, workflows, or coordination patterns.",T:"Share learnings, skill development, or transformative experiences.",S:"Document unconference sessions, topics proposed, or how sessions emerged from participant interests."};function F({artifacts:t,dim:a}){const c=Object.keys(v).find(i=>v[i]===a),n=c?B[c]:"Be the first to contribute here.";return e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:["Knowledge Nodes (",t.length,")"]}),t.length===0?e.jsx("div",{className:"text-center py-12 bg-[#0a101d] border border-[#1d2839] rounded-lg",children:e.jsxs("div",{className:"max-w-sm mx-auto",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:a.color+"20"},children:e.jsx("span",{className:"text-3xl font-mono font-bold",style:{color:a.color},children:a.letter})}),e.jsxs("h3",{className:"text-white font-semibold mb-2",children:["No ",a.name.toLowerCase()," nodes yet"]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:n}),e.jsx(h,{to:"/contribute",className:"inline-block bg-[#a6ed2a] text-[#080c16] px-4 py-2 rounded-lg text-sm font-medium hover:bg-[#b8f247] transition-colors",children:"Contribute"})]})}):e.jsx("div",{className:"grid gap-3",children:t.map(i=>e.jsx(j,{artifact:i},i.id))})]})}function G(){const{dimension:t}=T(),[a,c]=d.useState([]),[n,i]=d.useState(!0),{convergence:r}=D();let o=t?v[t]:null;if(!o&&t&&r.dimensions){const l=r.dimensions.find(s=>s.key===t);l&&(o={letter:l.letter,name:l.name,subtitle:l.desc,tagName:l.tag,color:l.color})}return d.useEffect(()=>{if(!o)return;async function l(){i(!0);const{data:s}=await x.from("tags").select("id").eq("name",o.tagName).single();if(s){const{data:m}=await x.from("artifact_tags").select("artifact_id").eq("tag_id",s.id);if(m&&m.length>0){const g=m.map(u=>u.artifact_id),[{data:f},{data:w}]=await Promise.all([x.from("artifacts").select("*").in("id",g),x.from("coordination_interests").select("artifact_id").in("artifact_id",g)]);if(f){const u={};if(w)for(const p of w)u[p.artifact_id]=(u[p.artifact_id]||0)+1;f.sort((p,k)=>{const C=u[p.id]||0,_=u[k.id]||0;return _!==C?_-C:new Date(k.created_at).getTime()-new Date(p.created_at).getTime()}),c(f)}}}i(!1)}l()},[o?.tagName]),o?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("nav",{className:"flex items-center gap-1.5 text-sm mb-3",children:[e.jsx(h,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Explore"}),e.jsx(A,{className:"w-3.5 h-3.5 text-gray-600"}),e.jsx("span",{className:"text-gray-400",children:"Graph Dimensions"}),e.jsx(A,{className:"w-3.5 h-3.5 text-gray-600"}),e.jsxs("span",{style:{color:o.color},children:[o.letter," ",o.name]})]}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx("span",{className:"font-mono text-3xl font-bold",style:{color:o.color},children:o.letter}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:o.name}),e.jsx("p",{className:"text-gray-400",children:o.subtitle})]})]})]}),n?e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading..."}):e.jsxs(e.Fragment,{children:[t==="H"&&e.jsx(M,{artifacts:a}),t==="L"&&e.jsx(P,{artifacts:a}),t==="S"&&e.jsx(I,{artifacts:a}),t!=="H"&&t!=="L"&&t!=="S"&&e.jsx(F,{artifacts:a,dim:o})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-400",children:"Unknown dimension."}),e.jsx(h,{to:"/dimensions",className:"text-[#a6ed2a] hover:text-white text-sm mt-2 inline-block",children:"Back to Dimensions"})]})}export{G as DimensionView};
